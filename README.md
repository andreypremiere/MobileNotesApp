# NotesApp

NotesApp — это мобильное приложение для создания, редактирования и управления заметками и разделами с поддержкой оффлайн-режима и синхронизации данных. Пользователи могут организовывать заметки в разделы, добавлять географические метки с использованием Google maps, а также регистрироваться и входить в систему для синхронизации данных с сервером.

## Функционал

### Основные возможности
- **Аутентификация**:
  - Регистрация и вход в систему с использованием никнейма и пароля.
  - Хранение токена и никнейма в AsyncStorage для автоматического входа.
  - Выход из аккаунта.
- **Управление разделами**:
  - Создание, редактирование и удаление разделов.
  - Просмотр списка всех разделов.
- **Управление заметками**:
  - Создание, редактирование и удаление заметок внутри разделов.
  - Заметки содержат заголовок, подзаголовок (до 150 символов), текст и географическую метку.
  - Просмотр списка заметок в выбранном разделе.
- **Географические метки**:
  - Интеграция с Google maps для добавления географических меток к заметкам.
  - Поиск адресов с автодополнением через API Яндекс Геокодера.
  - Отображение выбранной точки на карте с возможностью изменения координат через нажатие на карту.
- **Оффлайн-режим**:
  - Локальное хранение данных в SQLite.
  - Логирование действий (создание, обновление, удаление заметок и разделов) в файл  для последующей синхронизации.
- **Синхронизация**:
  - Автоматическая синхронизация данных с сервером при наличии токена и подключения к интернету.
  - Обработка логов действий для выполнения операций на сервере после восстановления соединения.

### Структура приложения
- **Страницы**:
  - `LoginPage`: Страница входа с полями для никнейма и пароля.
  - `RegisterPage`: Страница регистрации.
  - `ChaptersPage`: Список разделов с возможностью создания нового раздела.
  - `ChapterPage`: Создание или редактирование раздела.
  - `NotesPage`: Список заметок в выбранном разделе с возможностью создания новой заметки.
  - `NotePage`: Создание или редактирование заметки с полями для заголовка, подзаголовка, текста и картой.
  - `MapPage`: Интерфейс для выбора географической метки с использованием карты и поиска адреса.
- **Компоненты**:
  - `Chapter`: Компонент для отображения раздела.
  - `Note`: Компонент для отображения заметки.
- **Контекст**:
  - `AuthContext`: Хранит токен и никнейм пользователя.
  - `DatabaseContext`: Предоставляет доступ к базе данных SQLite.
- **Утилиты**:
  - `NoteRepository` и `SectionRepository`: Классы для работы с базой данных SQLite (CRUD-операции для заметок и разделов).
  - `requests`: Функции для взаимодействия с сервером (регистрация, вход, операции с разделами и заметками).
  - `loggingUtils`: Логирование действий в файл.
  - `syncUtils`: Синхронизация локальных действий с сервером.

### Как работает
1. **Аутентификация**:
   - Пользователь регистрируется или входит в систему через `RegisterPage` или `LoginPage`.
   - Токен и никнейм сохраняются в AsyncStorage для автоматической авторизации.
2. **Работа с разделами**:
   - На `ChaptersPage` отображается список разделов, полученных из SQLite (оффлайн (нет токена)) или сервера (при наличии токена и интернета).
   - Пользователь может создать новый раздел или отредактировать существующий через `ChapterPage`.
3. **Работа с заметками**:
   - На `NotesPage` отображаются заметки для выбранного раздела.
   - Пользователь может создать или отредактировать заметку через `NotePage`, добавив заголовок, подзаголовок, текст и географическую метку.
4. **Географические метки**:
   - На `MapPage` пользователь может искать адрес через автодополнение или выбирать точку на карте.
   - Координаты и адрес сохраняются в объекте заметки.
5. **Оффлайн-режим и синхронизация**:
   - Все изменения (создание, обновление, удаление) сохраняются в SQLite.
   - Действия логируются в `actions.json` в оффлайн-режиме.
   - При восстановлении соединения и наличии токена действия из `actions.json` отправляются на сервер через `syncActions`.

### Требования
- **React Native**: Для запуска приложения.
- **Node.js**: Для установки зависимостей.
- **SQLite**: Для локального хранения данных (`react-native-sqlite-storage`).
- **Сервер**: REST API по адресу `https://web-production-d616.up.railway.app` для синхронизации данных.

## Установка и запуск

### Предварительные требования
1. Установите [Node.js](https://nodejs.org/) (рекомендуемая версия: LTS).
2. Установите [React Native CLI](https://reactnative.dev/docs/environment-setup).

### Установка
1. Склонируйте репозиторий:
   ```bash
   git clone <https://github.com/andreypremiere/MobileNotesApp.git>
   cd NotesApp
   ```
2. Установите зависимости:
   ```bash
   npm install
   ```
3. Настройте эмулятор или подключите устройство:
   - Для Android: установите Android Studio и настройте эмулятор.

### Запуск

1. Запустите приложение на Android:
   ```bash
   npx react-native run-android
   ```

## Дизайн
Дизайн приложения доступен в Figma: [NotesApp Design](https://www.figma.com/design/TbySFpvw2bxzbmMakRU1KK/NotesApp?node-id=0-1&t=DuU2YTdy4OiQzKNe-1).

## Ограничения
- Синхронизация возможна только при наличии токена и подключения к интернету.

## Возможные улучшения
- Реализовать индикатор статуса синхронизации (онлайн/оффлайн).
- Добавить поддержку изображений в заметках.
- Улучшить обработку ошибок при работе с API и SQLite.

## Монетизация

NotesApp имеет несколько возможностей для монетизации, которые могут быть реализованы для получения дохода:

1. **Freemium-модель**:
   - Бесплатная версия приложения предоставляет базовый функционал (создание ограниченного количества заметок и разделов, оффлайн-режим).
   - Премиум-подписка (ежемесячная или годовая) открывает дополнительные возможности:
     - Неограниченное количество заметок и разделов.
     - Расширенные функции карты (например, сохранение карт для оффлайн-доступа).
     - Приоритетная синхронизация данных с сервером.
     - Эксклюзивные темы оформления или настройки интерфейса.
   - Пример: Подписка за $0.99/месяц или $10.99/год.

2. **Реклама**:
   - В бесплатной версии можно интегрировать ненавязчивую баннерную рекламу (например, через Google AdMob) на страницах `ChaptersPage` или `NotesPage`.
   - Предложение удаления рекламы через разовую покупку или подписку.

3. **Платные функции**:
   - Разовые покупки для разблокировки дополнительных функций, таких как:
     - Экспорт заметок в PDF или другие форматы.
     - Интеграция с облачными сервисами (Google Drive, Dropbox) для резервного копирования.
     - Расширенные функции геолокации (например, маршруты или история местоположений).
   - Пример: Экспорт заметок за $1.99.

4. **Партнерства и интеграции**:
   - Интеграция с платформами для планирования (например, Google Calendar) за дополнительную плату.
   - Партнерство с сервисами картографии (например, Яндекс.Карты) для предоставления премиум-функций, таких как более точные карты или дополнительные гео-данные.

5. **Корпоративная версия**:
   - Разработка версии приложения для командной работы с функциями совместного редактирования заметок и разделов.
   - Продажа лицензий для компаний или образовательных учреждений.
   - Пример: Лицензия для команд за $99/год на 10 пользователей.

6. **Продажа пользовательских данных (этичная)**:
   - С согласия пользователей собирать анонимизированные данные об использовании приложения (например, популярные типы заметок или геолокаций) и продавать их аналитическим компаниям.
   - Обязательно соблюдать GDPR и другие законы о конфиденциальности.